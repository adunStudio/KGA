# 스킬과 상태이상

### 스킬의 구분

- 스킬 **발동 타입**에 따른 구분
  - 인스턴스(즉시 발동 형), 캐스팅(일정 시간 후 발동), 차징(충전 후 발동), 채널링(일정 시간 동안 지속 효과)
- 스킬 **타겟**에 따른 구분
  - 타겟팅, 논 타겟팅
- 스킬 **범위**에 따른 구분
  - 단일 대상 스킬, 광역 스킬
- 스킬 **역할**에 따른 구분
  - 공격, 버프, 디버프, 회복, 소환

### 스킬 설계 시 체크사항

- **역할과 성격의 구분**이 확실한지 체크
  - 상위/하위 클래스로 나누어 데이터량을 절약할 수 있는지 vs 데이터 사이즈는 크지만 복잡한 형태의 기능을 구현해야 하는지
  - 예: XX 스킬은 타겟팅한 적 1인에게 즉시 데미지를 입히고 1초 간 해당 적과 주변 1m내의 적에게 스턴과 독 데미지를 입힌다.
-  **게임의 플레이 환경**을 고려
  - 특히 멀티플레이어 환경에서 너무 강해지거나 쓸모가 없어지거나 예측을 벗어난 상황이 벌어지지 않도록 고려
  - 예: 적의 최대 HP의 5%를 무조건 깎는 스킬이 있을 때, 20명의 공대의 공대원이 모두 해당 스킬만 들고 레이드를 간다면?

### 투사체 설계

- 스킬 클래스는 투사체의 ID, 개수, 생성 타이밍 등만 제어
- 투사체는 별도의 클래스로 제어
- 투사체의 크기, 이동 거리, 이동 궤적, 폭발 등은 스크립트로 제어

### 소환물 설계

- 소환물도 기본적으로 투사체 설계와 비슷한 프로세스 설계
- 소환물의 공격 시 어그로 타겟에 대한 설정 규칙 필요
  - 예: 소환물이 어그로를 끌 수 있다. 똑똑한 몬스터는 소환물이 공격하더라도 주인이 어그로 수치를 높인다 등등
- 소환물도 몬스터처럼 AI 등에 대한 구조 설계 필요

---

## 상태이상 설계

### 상태 이상 설계 시 체크 사항

- 상태 이상은 별도의 테이블을 통해 체크
- 개임 내에서 걸릴 수 있는 모든 상태 이상의 종류 정리
  - Stun, Blind, Curse, Slience, Sleep, Knockback 등
- 기본적으로 게임 내 모든 상태 이상은 한번에 모두 걸릴 수 있도록 테이블을 설계해야 함
  - 상태 이상 종류, 상태 이상 시간의 리스트 형식
- 각 상태 이상의 지속 시간은 스킬 테이블에서 관리
- 같은 상태 이상이 중복되어 걸릴 때의 처리 방법 결정
  - 예: 이동속도와 공격속도를 20% 줄이는 Slow를 세 번 맞을 때 등
- 상태 이상의 해제 방법을 정리
  - 시간이 지나면, 한 대 맞으면, 상태 이상 해제 마법을 맞으면 등등

### 버프 설계 시 체크 사항

- 버프는 별도의 테이블을 통해 체크
- 게임 내에서 걸릴 수 있는 모든 버프의 종류 정리
- 같은 버프를 중복해서 받았을 때의 처리 방법 결정
  - HP재생 버프를 두 번 받으면 재생 속도가 두 배가 되어야 하나?
- 중복해서 받을 수 있는 버프의 중복 회수 제한 필요
  - 각각의 버프가 테이블에 남은 시간과 함께 기록되기 때문에 데이터 사이즈의 관리 + 밸런싱을 위해 필요
- 버프를 적용하는 기본 값의 처리 방법 및 순서 결정, 특히 %상승 등 곱셈 기반의 버프일 경우
  - 공격력을 10% 증가시키는 버프가 있을 경우 버프는 맨손 공격력에서 10%인지, 무기를 든 공격력에서 10%인지, 공격력+10의 오라가 적용된 상태에서 10%인지 등
- 버프의 구분: 한 번에 걸릴 수 있는 버프의 모든 리스트 정의를 위해 필요
  - 스킬, 아이템(물약, 스크롤), 이벤트(or PC방), 퀴스트 보상, 종족(or 길드) 보상 등
- 버프의 그룹화
  - 방어력+10의 Lv1 방패 버프를 받은 후 방어력 +20의 Lv3 방패 버프를 받으면 처음 버프에 덮어써야 함
- 각 버프의 지속 시간은 **스킬 테이블**에서 관리
- 버프의 해제 방법을 정리
  - 시간이 지나면, 한대 맞으면, 디스펠 마법을 맞으면 등등
- 버프 해제 후 능력치 적용 방법을 정리
  - 예: HP를 일시적으로 100늘려주는 버프를 받음 → 공격을 받아 총 HP가 99가 됨 →  버프 해제 시 캐릭터의 상태는?

### 디버프 설계 시 체크 사항

- 디버프도 **별도의 테이블**을 통해 체크
- 게임 내에서 걸릴 수 있는 모든 디버프의 종류 정리
- 같은 디버프를 **중복**해서 받았을 때의 처리 방법 결정
  - 중복해서 걸리는 디버프의 중복 횟수 제한 필요
- 각 디버프의 지속 시간은 **스킬 테이블**에서 관리
- 디버프의 해제 방법을 정리
  - 시간이 지나면 치료 마법을 맞으면 등등

